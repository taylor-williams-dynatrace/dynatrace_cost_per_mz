{"version":19,"variables":[{"key":"ManagementZone","visible":true,"type":"query","version":2,"editable":true,"input":"fetch bizevents, from: -760d\n|filter event.type == \"mz_cost_event\"\n| summarize managementZone = collectDistinct(managementZone)\n| expand managementZone","multiple":true},{"key":"Month","visible":true,"type":"query","version":2,"editable":true,"input":"fetch bizevents, from: -760d\n|filter event.type == \"mz_cost_event\"\n| parse summary_date, \"LD{7}:month\"\n| summarize month = collectDistinct(month)\n| expand month\n| sort month desc","multiple":true}],"tiles":{"0":{"title":"Daily Cost Records","type":"data","query":"fetch bizevents, from:-365d\n| filter event.type == \"mz_cost_event\"\n| filter isNotNull(summary_date)\n| parse summary_date, \"LD{7}:month\"\n| parse summary_date, \"LD:summary_date'T'\"\n| filter in(month,array($Month))\n| filter in(managementZone,array($ManagementZone))\n| dedup {summary_date, managementZone}\n| fieldsAdd dt.security_context = if(isNull(dt.security_context),managementZone, else:dt.security_context)\n| fields summary_date, managementZone, mz_total_cost, fullstack_cost, fullstack_numberofHosts, infra_cost, infra_numberofHosts, paas_cost, paas_numberofHosts, discovery_cost, discovery_numberofEntities, http_cost, numberofhttpchecks, browser_cost, numberofsynthetics, AppOnly_costs, k8s_count, dt.security_context\n| sort summary_date desc","visualization":"table","visualizationSettings":{"table":{"sortBy":[{"columnId":"[\"summary_date\"]","direction":"descending"}],"columnOrder":["[\"summary_date\"]","[\"managementZone\"]","[\"mz_total_cost\"]","[\"fullstack_cost\"]","[\"fullstack_numberofHosts\"]","[\"infra_cost\"]","[\"infra_numberofHosts\"]","[\"paas_cost\"]","[\"paas_numberofHosts\"]","[\"discovery_cost\"]","[\"discovery_numberofEntities\"]","[\"http_cost\"]","[\"numberofhttpchecks\"]","[\"browser_cost\"]","[\"numberofsynthetics\"]","[\"AppOnly_costs\"]","[\"k8s_count\"]","[\"dt.security_context\"]"]},"autoSelectVisualization":false,"thresholds":[]},"querySettings":{"maxResultRecords":100000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"1":{"title":"Total Cost for Selected Variables","type":"data","query":"fetch bizevents, from:-760d\n| filter event.type == \"mz_cost_event\"\n| filter isNotNull(summary_date)\n| parse summary_date, \"LD{7}:month\"\n| parse summary_date, \"LD:summary_date'T'\"\n| filter in(month,array($Month))\n| filter in(managementZone,array($ManagementZone))\n| dedup {summary_date, managementZone}\n| fields summary_date, managementZone, mz_total_cost, fullstack_cost, fullstack_numberofHosts, infra_cost, infra_numberofHosts, paas_cost, paas_numberofHosts, discovery_cost, discovery_numberofEntities, http_cost, numberofhttpchecks, browser_cost, numberofsynthetics, AppOnly_costs, k8s_count\n| summarize total_cost = sum(mz_total_cost)","visualization":"singleValue","visualizationSettings":{"singleValue":{"labelMode":"none","label":"total_cost","recordField":"total_cost","isIconVisible":true,"prefixIcon":"MoneyIcon","colorThresholdTarget":"background","trend":{"isVisible":true}},"autoSelectVisualization":false,"thresholds":[{"id":1,"field":"total_cost","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6863)"},"comparator":"≥","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-status-warning-default, #eca440)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c4233b)"},"comparator":"≥","label":""}]}],"unitsOverrides":[{"identifier":"total_cost","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1748020143010}]},"querySettings":{"maxResultRecords":100000,"defaultScanLimitGbytes":5000,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"2":{"title":"Monthly Cost Trend for Environment and Management Zone","type":"data","query":"fetch bizevents, from:-760d\n| filter event.type == \"mz_cost_event\"\n| filter isNotNull(summary_date)\n| parse summary_date, \"LD{7}:month\"\n| parse summary_date, \"LD:summary_date'T'\"\n\n| filter in(managementZone,array($ManagementZone))\n| dedup {summary_date, managementZone}\n| sort summary_date desc\n| summarize monthly_cost = sum(mz_total_cost), by:{month}\n| fieldsAdd summary_month = concat(month,\"-01 00:00:00\")\n| parse summary_month, \"TIME:summary_month\"\n| fields summary_month, monthly_cost","visualization":"areaChart","visualizationSettings":{"chartSettings":{"truncationMode":"middle","xAxisLabel":"summary_month","xAxisScaling":"auto","colorPalette":"moss-inverted","seriesOverrides":[{"seriesId":["monthly_cost"],"override":{"color":{"Default":"var(--dt-colors-charts-apdex-excellent-default, #2a7453)"}}}],"fieldMapping":{"leftAxisValues":["monthly_cost"],"timestamp":"summary_month"},"gapPolicy":"connect"},"autoSelectVisualization":false,"thresholds":[]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}}},"layouts":{"0":{"x":0,"y":2,"w":23,"h":7},"1":{"x":0,"y":0,"w":6,"h":2},"2":{"x":0,"y":9,"w":23,"h":5}},"importedWithCode":false,"settings":{}}